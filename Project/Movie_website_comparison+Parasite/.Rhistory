html
book_list <- html_node(html,'.sub_book_list_area')
book_list
lis <- html_nodes(book_list, "li")
html %>%
html_node('.sub_book_list_area') %>%
html_nodes('li') -> lis
lis
price <- c()
title <- c()
writer <- c()
for (li in lis) {
pr <- html_node(li, '.price') %>% html_text()
pr <- gsub('\\\\',"",pr)
price <- c(price,pr)
title <- c(title, html_node(li, '.book_tit') %>% html_text())
writer <- c(writer,html_node(li, '.book_writer') %>% html_text())
#cat(title, writer, price, '\n')
}
books <- data.frame(title = title, writer = writer, price = price)
c_books <- rbind(books,c_books)
View(c_books)
base_url <- "http://www.hanbit.co.kr/academy/books/category_list.html?"
page <- 'page='
category <-  "&cate_cd=004007"
url <- paste0(base_url,page,'2',category)
url
html <- read_html(url)
html
book_list <- html_node(html,'.sub_book_list_area')
book_list
lis <- html_nodes(book_list, "li")
html %>%
html_node('.sub_book_list_area') %>%
html_nodes('li') -> lis
lis
price <- c()
title <- c()
writer <- c()
for (li in lis) {
pr <- html_node(li, '.price') %>% html_text()
pr <- gsub('\\\\',"",pr)
price <- c(price,pr)
title <- c(title, html_node(li, '.book_tit') %>% html_text())
writer <- c(writer,html_node(li, '.book_writer') %>% html_text())
#cat(title, writer, price, '\n')
}
books <- data.frame(title = title, writer = writer, price = price)
c_books <- rbind(books,c_books)
View(books)
base_url <- "http://www.hanbit.co.kr/academy/books/category_list.html?"
page <- 'page='
category <-  "&cate_cd=004007&srt=p_pub_date"
url <- paste0(base_url,page,'2',category)
url
html <- read_html(url)
html
book_list <- html_node(html,'.sub_book_list_area')
book_list
lis <- html_nodes(book_list, "li")
html %>%
html_node('.sub_book_list_area') %>%
html_nodes('li') -> lis
lis
price <- c()
title <- c()
writer <- c()
for (li in lis) {
pr <- html_node(li, '.price') %>% html_text()
pr <- gsub('\\\\',"",pr)
price <- c(price,pr)
title <- c(title, html_node(li, '.book_tit') %>% html_text())
writer <- c(writer,html_node(li, '.book_writer') %>% html_text())
#cat(title, writer, price, '\n')
}
books <- data.frame(title = title, writer = writer, price = price)
c_books <- rbind(books,c_books)
View(books)
computer_books <- data.frame()
base_url <- "http://www.hanbit.co.kr/academy/books/category_list.html?"
page <- 'page='
category <-  "&cate_cd=004007&srt=p_pub_date"
for (i in 1:6) {
url <- paste0(base_url,page,i,category)
html <- read_html(url)
html
book_list <- html_node(html,'.sub_book_list_area')
book_list
lis <- html_nodes(book_list, "li")
html %>%
html_node('.sub_book_list_area') %>%
html_nodes('li') -> lis
lis
price <- c()
title <- c()
writer <- c()
for (li in lis) {
pr <- html_node(li, '.price') %>% html_text()
pr <- gsub('\\\\',"",pr)
price <- c(price,pr)
title <- c(title, html_node(li, '.book_tit') %>% html_text())
writer <- c(writer,html_node(li, '.book_writer') %>% html_text())
#cat(title, writer, price, '\n')
}
books <- data.frame(title = title, writer = writer, price = price)
c_books <- rbind(books,c_books)
}
View(c_books)
for (i in 1:6) {
url <- paste0(base_url,page,i,category)
html <- read_html(url)
html
book_list <- html_node(html,'.sub_book_list_area')
book_list
lis <- html_nodes(book_list, "li")
html %>%
html_node('.sub_book_list_area') %>%
html_nodes('li') -> lis
lis
price <- c()
title <- c()
writer <- c()
for (li in lis) {
pr <- html_node(li, '.price') %>% html_text()
pr <- gsub('\\\\',"",pr)
price <- c(price,pr)
title <- c(title, html_node(li, '.book_tit') %>% html_text())
writer <- c(writer,html_node(li, '.book_writer') %>% html_text())
#cat(title, writer, price, '\n')
}
books <- data.frame(title = title, writer = writer, price = price)
computer_books <- rbind.data.frame(computer_books,books)
}
View(computer_books)
library(openxlsx)
urltest <- http://www.hanbit.co.kr/academy/books/category_list.html?page=5&cate_cd=004008&srt=p_pub_date
urltest <- "http://www.hanbit.co.kr/academy/books/category_list.html?page=5&cate_cd=004008&srt=p_pub_date"
html_test <- read_html(urltest)
lis
lis
book_list
for (li in lis) {
pr <- html_node(li, '.price') %>% html_text()
pr <- gsub('\\\\',"",pr)
price <- c(price,pr)
title <- c(title, html_node(li, '.book_tit') %>% html_text())
writer <- c(writer,html_node(li, '.book_writer') %>% html_text())
#cat(title, writer, price, '\n')
}
price
lis
html_test %>%
html_node('.sub_book_list_area') %>%
html_nodes('li') -> lis
lis
book_list <- html_node(html_test,'.sub_book_list_area')
book_list
lis <- html_nodes(book_list, "li")
html_test %>%
html_node('.sub_book_list_area') %>%
html_nodes('li') -> lis
lis
class(lis)
base_url <- "http://www.hanbit.co.kr/academy/books/category_list.html?"
page <- 'page='
category <-  "&cate_cd=004008&srt=p_pub_date"
for (i in 1:10) {
url <- paste0(base_url,page,i,category)
html <- read_html(url)
html
book_list <- html_node(html,'.sub_book_list_area')
book_list
lis <- html_nodes(book_list, "li")
if(lis == (0)) {
break;
}else {
price <- c()
title <- c()
writer <- c()
for (li in lis) {
pr <- html_node(li, '.price') %>% html_text()
pr <- gsub('\\\\',"",pr)
price <- c(price,pr)
title <- c(title, html_node(li, '.book_tit') %>% html_text())
writer <- c(writer,html_node(li, '.book_writer') %>% html_text())
#cat(title, writer, price, '\n')
}
books <- data.frame(title = title, writer = writer, price = price)
computer_books <- rbind.data.frame(computer_books,books)
}
}
list
lis
lis <- html_nodes(book_list, "li")
lis
urltest <- "http://www.hanbit.co.kr/academy/books/category_list.html?page=5&cate_cd=004008&srt=p_pub_date"
html_test <- read_html(urltest)
book_list <- html_node(html_test,'.sub_book_list_area')
book_list
lis <- html_nodes(book_list, "li")
lis
if(lis == xml_nodeset(0)) {
break;
}else {
price <- c()
title <- c()
writer <- c()
for (li in lis) {
pr <- html_node(li, '.price') %>% html_text()
pr <- gsub('\\\\',"",pr)
price <- c(price,pr)
title <- c(title, html_node(li, '.book_tit') %>% html_text())
writer <- c(writer,html_node(li, '.book_writer') %>% html_text())
#cat(title, writer, price, '\n')
}
books <- data.frame(title = title, writer = writer, price = price)
computer_books <- rbind.data.frame(computer_books,books)
}
}
lis
price <- c()
title <- c()
writer <- c()
for (li in lis) {
pr <- html_node(li, '.price') %>% html_text()
pr <- gsub('\\\\',"",pr)
price <- c(price,pr)
title <- c(title, html_node(li, '.book_tit') %>% html_text())
writer <- c(writer,html_node(li, '.book_writer') %>% html_text())
#cat(title, writer, price, '\n')
}
price
for (i in 1:10) {
url <- paste0(base_url,page,i,category)
html <- read_html(url)
html
book_list <- html_node(html,'.sub_book_list_area')
book_list
lis <- html_nodes(book_list, "li")
price <- c()
title <- c()
writer <- c()
for (li in lis) {
pr <- html_node(li, '.price') %>% html_text()
pr <- gsub('\\\\',"",pr)
price <- c(price,pr)
title <- c(title, html_node(li, '.book_tit') %>% html_text())
writer <- c(writer,html_node(li, '.book_writer') %>% html_text())
#cat(title, writer, price, '\n')
}
if(price == NULL) {
break;
}else {
books <- data.frame(title = title, writer = writer, price = price)
computer_books <- rbind.data.frame(computer_books,books)
}
}
if(price == NULL) {
break
}else {
books <- data.frame(title = title, writer = writer, price = price)
computer_books <- rbind.data.frame(computer_books,books)
}
for (i in 1:10) {
url <- paste0(base_url,page,i,category)
html <- read_html(url)
html
book_list <- html_node(html,'.sub_book_list_area')
book_list
lis <- html_nodes(book_list, "li")
price <- c()
title <- c()
writer <- c()
for (li in lis) {
pr <- html_node(li, '.price') %>% html_text()
pr <- gsub('\\\\',"",pr)
price <- c(price,pr)
title <- c(title, html_node(li, '.book_tit') %>% html_text())
writer <- c(writer,html_node(li, '.book_writer') %>% html_text())
#cat(title, writer, price, '\n')
}
if(is.null(price)) {
break
}else {
books <- data.frame(title = title, writer = writer, price = price)
computer_books <- rbind.data.frame(computer_books,books)
}
}
View(computer_books)
computer_books <- data.frame()
base_url <- "http://www.hanbit.co.kr/academy/books/category_list.html?"
page <- 'page='
category <-  "&cate_cd=004007&srt=p_pub_date"
for (i in 1:6) {
url <- paste0(base_url,page,i,category)
html <- read_html(url)
html
book_list <- html_node(html,'.sub_book_list_area')
book_list
lis <- html_nodes(book_list, "li")
html %>%
html_node('.sub_book_list_area') %>%
html_nodes('li') -> lis
lis
price <- c()
title <- c()
writer <- c()
for (li in lis) {
pr <- html_node(li, '.price') %>% html_text()
pr <- gsub('\\\\',"",pr)
price <- c(price,pr)
title <- c(title, html_node(li, '.book_tit') %>% html_text())
writer <- c(writer,html_node(li, '.book_writer') %>% html_text())
#cat(title, writer, price, '\n')
}
books <- data.frame(title = title, writer = writer, price = price)
computer_books <- rbind.data.frame(computer_books,books)
}
View(computer_books)
for (i in 1:10) {
url <- paste0(base_url,page,i,category)
html <- read_html(url)
html
book_list <- html_node(html,'.sub_book_list_area')
book_list
lis <- html_nodes(book_list, "li")
price <- c()
title <- c()
writer <- c()
for (li in lis) {
pr <- html_node(li, '.price') %>% html_text()
pr <- gsub('\\\\',"",pr)
price <- c(price,pr)
title <- c(title, html_node(li, '.book_tit') %>% html_text())
writer <- c(writer,html_node(li, '.book_writer') %>% html_text())
#cat(title, writer, price, '\n')
}
if(is.null(price)) {
break
}else {
books <- data.frame(title = title, writer = writer, price = price)
IT_books <- rbind.data.frame(IT_books,books)
}
}
programming_books <- data.frame()
#finding the link and list of categories
text <- read_html(base_url)
category_list <- html_nodes(text, ".node_body")
category_list
category_list <- html_nodes(text, ".category_books")
category_list
text
View(text)
html <- read_html(url)
html
category_list <- html_nodes(text, ".lnb_area") %>% html_nodes('li')
category_list
View(category_list)
lis
category_list
link <- c()
category_name <- c()
category_list1 <- for(li in category_list) {
link <- c(link,html_node(category_list,'category_books') %>% html_text())
#category_name <-
}
category_list1
category_list1 <- for(li in category_list) {
link <- c(link,html_node(category_list,'category_books') %>% html_text())
#category_name <-
}
category_list1
html_node(category_list,'.category_books')
html_node(category_list,'category_books')
html_node(category_list,'category_books')
category
category_list
html_node(category_list,'category_books')
html_node(category_list,'li')
html_nodes(category_list,'li')
html_category %>% html_nodes('li') %>%
link <- gsub("<li><a href=","",li)
html_category <- category_list %>% html_nodes('li') %>%
link <- gsub("<li><a href=","",li)
html_category <- category_list %>%
html_nodes('li') %>%
link <- gsub("<li><a href=","",li)
html_category <- category_list %>%
html_nodes('li') %>%
link <- gsub("<li><a href=","",li)
html_category <- category_list %>%
html_nodes('li') #%>%
html_category
link <- gsub("<li><a href=","",li)
li
link
link <- gsub(">+")
link <- gsub(">+","",li)
link
link <- gsub(">","",li)
link
link <- gsub("<li><a href=","",li)
link
link <- gsub(">전체도서목록","",li)
link
link <- gsub("http://www.hanbit.co.kr/academy/books/category_list.html?","",li)
link
link <- gsub("<li><a href=","",html_category)
link
link <- gsub("http://www.hanbit.co.kr/academy/books/category_list.html?","",li)
link
link <- gsub("http://www.hanbit.co.kr/academy/books/category_list.html?","",html_category)
link
link <- gsub("<li><a href=\"?http://www.hanbit.co.kr/academy/books/category_list.html?","",html_category)
link
link <- gsub("</a></li>",""link)
link
link <- gsub("</a></li>","",link)
link
link <-substr(link,1,13)
link
link <- gsub("<li><a href=\"?http://www.hanbit.co.kr/academy/books/category_list.html?","",html_category)
link <- gsub("</a></li>","",link)
link <-substr(link,1,16)
link
category_list1 <-substr(link,1,16)
clas(category_list1)
class(category_list1)
as.data.frame(category_list1)
catagory_list1 <- gsub("?","&",category_list1)
category_list1
category_list1 <- gsub("?","&",category_list1)
category_list1
catagory_list1 <- gsub("?","&",category_list1)
### 시간별 리뷰수
![다음 네이버 시간별 리뷰건수](img/네이버 다음 시간별 리뷰건수.png)
setwd("d:/workspace/R_Crawling/Project/Movie_website_comparison+Parasite")
setwd("d:/workspace/R_Crawling/Project/Movie_website_comparison+Parasite")
### 워드클라우드 결과
setwd("d:/workspace/R_Crawling/Project/Movie_website_comparison+Parasite")
![wordcloud_naver](img/Naver_Parasite.png)
knitr::opts_chunk$set(echo = TRUE)
library(rvest)
library(stringr)
library(XML)
library(dplyr)
library(extrafont)
library(wordcloud)
library(wordcloud2)
windowsFonts()
windowsFonts(malgun = "맑은 고딕")
#theme_update(text = element_text(family = "malgun"))
trim <- function (x) gsub("^\\s+|\\s+$", "", x)
trim2 <- function(x) gsub("\\n","",x)
trim3 <- function(x) gsub("\\t","",x)
trim4 <- function(x) gsub("\\r","",x)
setwd("d:/workspace/R_Crawling/Project/Movie_website_comparison+Parasite")
setwd("d:/workspace/R_Crawling/Project/Movie_website_comparison+Parasite")
setwd("d:/workspace/R_Crawling/Project/Movie_website_comparison+Parasite")
---
title: "Project: [Movie]Parasite Analysis"
author: "최용호"
date: '2019 7 5 '
output: html_document
---
getwd()
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(rvest)
library(stringr)
library(XML)
library(dplyr)
library(extrafont)
library(wordcloud)
library(wordcloud2)
windowsFonts()
windowsFonts(malgun = "맑은 고딕")
#theme_update(text = element_text(family = "malgun"))
getwd()
getwd()
getwd()
getwd()
getwd()
knitr::opts_chunk$set(echo = TRUE)
getwd()
getwd()
library(tidyverse)
library(tidyverse)
library(ggplot2)
library(tidyverse)
install.packages("tidyverse")
df1 <- data.frame(customer_id = c(1:10),
product = sample(c("Toaster","TV","Dishwasheer"),10,replace = T))
state = sameple(c('New York',"California",5,replace = T))
state = sample(c('New York',"California",5,replace = T))
df1
df2
df2 <- tbl_df(data.frame(customer_id = c(sample(df1$customer_id),5)),
df2 <- tbl_df(data.frame(customer_id = c(sample(df1$customer_id),5)),
state = sample(c('New York',"California",5,replace = T)))
df2
df2 <- tbl_df(data.frame(customer_id = c(sample(df1$customer_id),5)),
state = sample(c('New York',"California"),5,replace = T))
df2 <- tbl_df(data.frame(customer_id = c(sample(df1$customer_id),5)),
state = sample(c('New York',"California"),5,replace = T))
df2 <- tbl_df(data.frame(customer_id = c(sample(df1$customer_id),5),
state = sample(c('New York',"California"),5,replace = T)))
df2
df2 <- tbl_df(data.frame(customer_id = c(sample(df1$customer_id),5)),
state = sample(c('New York',"California"),5,replace = T)))
df1
df2
